# Cline Development Rules for SF Joule Mario Quest

## Project Structure Rules

1. **Documentation Location**: ALL documentation MUST go in `/docs/` directory
   - PRDs in `docs/PRD.md`
   - Technical specs in `docs/TECHNICAL-SPEC.md`
   - Architecture in `docs/ARCHITECTURE.md`
   - Feature tracking in `docs/FEATURES.md`

2. **Code Location**: ALL source code MUST go in `/src/` directory
   - Core logic in `/src/core/`
   - UI components in `/src/ui/`
   - Configuration in `/src/config/`
   - Utilities in `/src/utils/`

3. **README Rules**: 
   - Keep README.md functional and user-focused
   - Max 200 lines
   - Include: What it does, How to install, How to use, How to contribute
   - NO technical implementation details in README

## Development Workflow

1. **Before Writing Code**:
   - Read `docs/PRD.md` to understand requirements
   - Read `docs/FEATURES.md` to check feature status
   - Update `docs/FEATURES.md` when starting new feature

2. **When Writing Code**:
   - Follow project structure strictly
   - One feature per file when possible
   - Add JSDoc comments for all functions
   - Log all actions for debugging

3. **After Writing Code**:
   - Update `docs/FEATURES.md` with completion status
   - Update `docs/CHANGELOG.md` with changes
   - Run tests if they exist

## Feature Detection from Conversations

When user mentions:
- "I want..." → Add to `docs/PRD.md` under Requirements
- "Add support for..." → Add to `docs/FEATURES.md` as new feature
- "Fix..." → Add to `docs/CHANGELOG.md` as bugfix
- "In the future..." → Add to `docs/ROADMAP.md`

## Code Style

- Use modern ES6+ JavaScript
- Prefer async/await over promises
- Use descriptive variable names
- Keep functions under 50 lines
- Extract complex logic to separate functions

## MVP Philosophy

- Build simplest version first
- One quest type only (start with "View Cost Center")
- No AI/ML in Phase 1
- No analytics in Phase 1
- Focus on: Config → Execute → Display

## Commit Message Format

```
[TYPE] Brief description

TYPE: FEAT | FIX | DOCS | REFACTOR | TEST
Example: [FEAT] Add Joule prompt sending
```

## Naming Conventions

### Files
- JavaScript: `kebab-case.js` (e.g., `joule-handler.js`)
- JSON: `kebab-case.json` (e.g., `quest-config.json`)
- CSS: `kebab-case.css`
- Markdown: `UPPERCASE.md` (e.g., `README.md`)

### Variables/Functions
- Variables: `camelCase`
- Functions: `camelCase`
- Classes: `PascalCase`
- Constants: `UPPER_SNAKE_CASE`

## Error Handling

- All async functions must use try-catch
- Log errors to console with context
- Display user-friendly error messages
- Never fail silently

## Testing

- Write tests for core logic functions
- Test files mirror src structure in `/tests/`
- Run tests before committing

## Documentation

- Update docs BEFORE changing code
- Keep docs in sync with implementation
- Use Markdown formatting consistently
- Include code examples where helpful
